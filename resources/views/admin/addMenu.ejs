<%- include("../partials/sidebar.ejs") %>
    <section id="main-content">
        <%- include("../partials/dashNav.ejs") %>
            <div class="main-content-info mt-24 flex flex-col items-center">
                <h1 class="font-bold text-2xl">Add Menu Items</h1>

                <% if(menu) { %>
                    <form method="POST" action="/updateMenu" enctype="multipart/form-data"
                        class="w-1/2 bg-white shadow-form rounded px-8 pt-6 pb-8 mt-4 justify-center ">
                        <% if(messages.success) { %>
                            <span id="success-alert" class="text-white text-sm p-4 border bg-green-600 mb-2 w-3/4">
                                <%= messages.success %>
                            </span>
                            <% } %>
                                <% if(messages.error) { %>
                                    <span id="error-alert"
                                        class="text-white text-bold text-sm p-4 border bg-red-500 mb-2 w-3/4">
                                        <%= messages.error %>
                                    </span>
                                    <% } %>
                                        <input required value="<%= menu._id %>" type="hidden" name="id">
                                        <label for="name" class="block text-gray-700 text-sm font-bold my-2">Product
                                            Name</label>
                                        <input required value="<%= menu.name %>"
                                            class="block shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                            type="text" name="name">


                                        <label for="categoryId"
                                            class="block text-gray-700 text-sm font-bold my-2">Category</label>
                                        <select required name="categoryId"
                                            class="block shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                                            <% categories.forEach(function(category) { %>
                                                <% if(category._id===menu.categoryId) { %>
                                                    <option value="<%=category._id %>" selected>
                                                        <% } else { %>
                                                    <option value="<%=category._id %>">
                                                        <% } %>
                                                            <%= category.name %>
                                                    </option>
                                                    <% }) %>
                                        </select>

                                        <label for="price"
                                            class="block text-gray-700 text-sm font-bold my-2">Price</label>
                                        <input required value="<%= menu.price %>"
                                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                            type="text" name="price">

                                        <label for="size"
                                            class="block text-gray-700 text-sm font-bold my-2">Size</label>
                                        <input required value="<%= menu.size %>"
                                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                            type="text" name="size">

                                        <label for="image"
                                            class="block text-gray-700 text-sm font-bold my-2">Image</label>
                                        <input
                                            class="block shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                            type="file" name="image" />

                                        <label for="description"
                                            class="block text-gray-700 text-sm font-bold my-2">Description</label>
                                        <textarea required type="textbox" name="description" rows="6" cols="60"
                                            class="border-2 rounded-md border-red-300 focus:outline-none p-3"><%= menu.description %></textarea>
                                        <div class="flex justify-center">
                                            <button
                                                class=" btn-primary rounded-full text-white font-bold py-2 px-16 content-center  rounded focus:outline-none focus:shadow-outline"
                                                type="submit">Update</button>
                                        </div>
                    </form>
                    <% } else { %>
                        <form method="POST" action="/addMenu" enctype="multipart/form-data"
                            class="w-1/2 bg-white shadow-form rounded px-8 pt-6 pb-8 mt-4 justify-center items-center ">
                            <% if(messages.success) { %>
                                <span id="success-alert" class="text-white text-sm p-4 border bg-green-600 mb-2 w-3/4">
                                    <%= messages.success %>
                                </span>
                                <% } %>
                                    <% if(messages.error) { %>
                                        <span id="error-alert"
                                            class="text-white text-bold text-sm p-4 border bg-red-500 mb-2 w-3/4">
                                            <%= messages.error %>
                                        </span>
                                        <% } %>
                                            <label for="name" class="block text-gray-700 text-sm font-bold my-2">Product
                                                Name</label>
                                            <input required
                                                class="block shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                                type="text" name="name">


                                            <label for="categoryId"
                                                class="block text-gray-700 text-sm font-bold my-2">Category</label>
                                            <select required name="categoryId"
                                                class="block shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                                                <% categories.forEach(function(category) { %>
                                                    <option value="<%= category._id %>">
                                                        <%= category.name %>
                                                    </option>
                                                    <% }) %>
                                            </select>

                                            <label for="price"
                                                class="block text-gray-700 text-sm font-bold my-2">Price</label>
                                            <input required
                                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                                type="text" name="price">

                                            <label for=""
                                                class="block text-gray-700 text-sm font-bold my-2">Size</label>
                                            <input
                                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                                type="text" name="size">

                                            <label for="image"
                                                class="block text-gray-700 text-sm font-bold my-2">Image</label>
                                            <input required
                                                class="block shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                                type="file" name="image" />

                                            <label for=""
                                                class="block text-gray-700 text-sm font-bold my-2">Description</label>
                                            <textarea required type="textbox" name="description" rows="6" cols="60"
                                                class="border-2 rounded-md border-red-300 focus:outline-none p-3"></textarea>
                                            <br />
                                            <div class="flex justify-center">
                                                <button
                                                    class=" btn-primary rounded-full text-white font-bold py-2 px-16 content-center  rounded focus:outline-none focus:shadow-outline"
                                                    type="submit">Add</button>
                                            </div>
                        </form>
                        <% } %>
            </div>
    </section>